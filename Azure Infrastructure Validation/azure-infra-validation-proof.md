# Azure Infrastructure Validation – Proof

## Purpose

Validate Azure infrastructure by comparing:

* Actual Azure inventory
* Terraformer-generated Terraform code
* Scout Suite coverage positioning

---

## 1. Azure Resource Graph – Actual Inventory

### Command

```bash
az graph query -q "Resources | summarize count() by type | project type, count_ | order by count_ desc" \
  --query "data[].{Type:type, Count:count_}" -o table
```

### Purpose

Fetches real Azure resources from the subscription.

### Shows

Actual count of Azure resources (source of truth).
<img width="987" height="711" alt="image" src="https://github.com/user-attachments/assets/5ba6cc5f-4cee-4568-b71d-877d22c347dd" />

---

## 2. Terraformer – Generated Terraform Resources

### Command

```bash
cd /root/tf-scan-subscription-no-db/azurerm

grep -R --include="*.tf" -hE '^\s*resource\s+"' . \
| awk -F'"' '{print $2}' \
| sort | uniq -c | sort -nr
```

### Purpose

Counts resources generated by Terraformer.

### Shows

Which Azure resources are captured as Terraform code.

<img width="995" height="495" alt="image" src="https://github.com/user-attachments/assets/aef780dd-d33c-485f-9db1-f4cbfcb4a202" />

---

## 3. Azure vs Terraformer – Missing Resources

### Azure Has

```bash
az network vnet list --query "[?contains(name,'vm-vc-dev')].name" -o tsv
az network nsg list --query "[?contains(name,'vm-vc-dev')].name" -o tsv
az network nic list --query "[?contains(name,'vm-vc-dev')].name" -o tsv
az network public-ip list --query "[?contains(name,'vm-vc-dev')].name" -o tsv
```

### Terraformer Has

```bash
grep -R --include="*.tf" -n "vm-vc-dev" /root/tf-scan-subscription-no-db/azurerm || echo "Not present in Terraformer output"
```

### Shows

Resources exist in Azure but are missing from Terraformer output.

---

## 4. Scout Suite Positioning

### Key Point

Scout Suite scans the actual Azure environment directly using Azure APIs, not Terraform files.

### Shows

Security and configuration validation for all real Azure resources, including those missing from Terraformer.

---

## Conclusion

* Azure Resource Graph = actual inventory
* Terraformer = partial Terraform coverage
* Scout Suite = full security posture visibility

All three layers together provide complete validation.
